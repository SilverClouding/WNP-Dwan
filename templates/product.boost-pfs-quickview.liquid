{% layout none %}
{% assign bc_settings = shop.metafields.bc-sf-filter.settings %}
  {% assign active_vendor = true %}
  {% assign active_description = true %}
  {% assign active_cart_form = true %}
  {% assign active_price = true %}{% assign file_extension = 'png' %}
  {% assign view_full_label = 'product_filter_search_quickview.view_full' | t %}
  {% if view_full_label contains 'translation missing'  %}
    {% assign view_full_label = 'View full details' %}
  {% endif %}

  {% assign quantity_label = 'product_filter_search_quickview.quantity' | t %}
  {% if quantity_label contains 'translation missing'  %}
    {% assign quantity_label = 'Quantity' %}
  {% endif %}

  {% assign add_to_cart_btn_label = 'product_filter_search_quickview.add_to_cart' | t %}
  {% if add_to_cart_btn_label contains 'translation missing'  %}
    {% assign add_to_cart_btn_label = 'Add To Cart' %}
  {% endif %}

  {% assign sold_out_btn_label = 'product_filter_search_quickview.sold_out' | t %}
  {% if sold_out_btn_label contains 'translation missing'  %}
    {% assign sold_out_btn_label = 'Sold Out' %}
  {% endif %}


  {% comment %} Translation {% endcomment %}
  {% assign view_full_label = 'View Full Details' %}
  {% if bc_settings contains 'qvViewFullDetails' %}
  {% assign view_full_label = bc_settings | split: 'qvViewFullDetails":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign quantity_label = 'Quantity' %}
  {% if bc_settings contains 'qvQuantity' %}
  {% assign quantity_label = bc_settings | split: 'qvQuantity":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign add_to_cart_btn_label = 'Add To Cart' %}
  {% if bc_settings contains 'qvAddToCartBtnLabel' %}
  {% assign add_to_cart_btn_label = bc_settings | split: 'qvAddToCartBtnLabel":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign sold_out_btn_label = 'Sold Out' %}
  {% if bc_settings contains 'qvSoldOutLabel' %}
  {% assign sold_out_btn_label = bc_settings | split: 'qvSoldOutLabel":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}

  {% comment %} QV Settings {% endcomment %}
  {% assign active_vendor = true %}
  {% assign active_description = true %}

  {% assign bc_al_qv_cart_form_enable = 'true' %}
  {% if bc_settings contains 'qvCartFormEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_cart_form_enable = bc_settings | split: 'qvCartFormEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}

  {% assign bc_al_qv_notify_form_enable = 'false' %}
  {% if bc_settings contains 'qvNotifyMeFormEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_notify_form_enable = bc_settings | split: 'qvNotifyMeFormEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}
  {% comment %} Translation {% endcomment %}
  {% assign view_full_label = 'View Full Details' %}
  {% if bc_settings contains 'qvViewFullDetails' %}
  {% assign view_full_label = bc_settings | split: 'qvViewFullDetails":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign quantity_label = 'Quantity' %}
  {% if bc_settings contains 'qvQuantity' %}
  {% assign quantity_label = bc_settings | split: 'qvQuantity":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign add_to_cart_btn_label = 'Add To Cart' %}
  {% if bc_settings contains 'qvAddToCartBtnLabel' %}
  {% assign add_to_cart_btn_label = bc_settings | split: 'qvAddToCartBtnLabel":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}
  {% assign sold_out_btn_label = 'Sold Out' %}
  {% if bc_settings contains 'qvSoldOutLabel' %}
  {% assign sold_out_btn_label = bc_settings | split: 'qvSoldOutLabel":' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip | escape %}
  {% endif %}

  {% comment %} QV Settings {% endcomment %}
  {% assign active_vendor = true %}
  {% assign active_description = true %}

  {% assign bc_al_qv_cart_form_enable = 'true' %}
  {% if bc_settings contains 'qvCartFormEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_cart_form_enable = bc_settings | split: 'qvCartFormEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}

  {% assign bc_al_qv_notify_form_enable = 'false' %}
  {% if bc_settings contains 'qvNotifyMeFormEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_notify_form_enable = bc_settings | split: 'qvNotifyMeFormEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}

  {% assign bc_al_qv_social_block_enable = 'false' %}
  {% if bc_settings contains 'qvSocilaBlockEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_social_block_enable = bc_settings | split: 'qvSocilaBlockEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}

  {% assign bc_al_qv_social_block_enable = 'false' %}
  {% if bc_settings contains 'qvSocilaBlockEnable' and bc_al_is_advanced_version %}
    {% assign bc_al_qv_social_block_enable = bc_settings | split: 'qvSocilaBlockEnable:' | last | split: ',' | first | replace: '"', '' | replace: '}', '' | strip %}
  {% endif %}

{% assign image_size = 'original' %}
{% assign image_thumb_size = 'original' %}
{% assign image_scale = 3 %}
{% assign truncate_words = 30 %}
{% assign current_variant = product.selected_or_first_available_variant %}


<div class="boost-pfs-quickview-wrapper check fancybox-inner">
  <button title="Close" class="boost-pfs-quickview-close boost-pfs-filter-button">Ã—</button>
  <div class="boost-pfs-quickview-content">
    {%comment %}
    <div class="boost-pfs-quickview-left boost-pfs-quickview-product-thumbs">

      {% if product.images.size > 0 %}
      <div class="boost-pfs-quickview-slider">
          <div class="boost-pfs-quickview-slider-inner">
            <div class="boost-pfs-quickview-featured-image-wrapper">
        {% for image in product.images %}<div class="boost-pfs-quickview-featured-image">
          <img src="{{ image.src | img_url: image_size }}" alt="{{ image.alt | escape }}" />
                </div>
        {% endfor %}
            </div>
      </div>
      {% if product.compare_at_price > product.price %}
        <div class="boost-pfs-quickview-sale-lable">Sale</div>
        {% endif %}<div class="boost-pfs-quickview-slider-nav">
            <button class="boost-pfs-filter-button boost-pfs-quickview-slider-prev" aria-label="Previous image"> </button>
            <button class="boost-pfs-filter-button boost-pfs-quickview-slider-next" aria-label="Next image"> </button>
          </div>
          <div class="boost-pfs-quickview-slider-dots">
            {% for image in product.images %}
              <div class="boost-pfs-quickview-slider-dot" data-image="{{ image.src | product_img_url }}" data-index="{{forloop.index0}}"> </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

    </div>

    <div class="boost-pfs-quickview-right product-details" tabindex="-1">
      <div class="boost-pfs-quickview-right-inner">
        <h2 class="boost-pfs-quickview-title" tabindex="-1">{{ product.title }}</h2>

        {% if active_vendor %}
        <p class="boost-pfs-quickview-vendor">{{ product.vendor }}</p>
        {% endif %}

        {% if active_description %}
        <div class="boost-pfs-quickview-description">
          {{ product.description | strip_html | truncatewords: truncate_words }}
        </div>
        {% endif %}



        {% if active_price %}
        <div class="boost-pfs-quickview-price-wrapper {% unless current_variant.available %} boost-pfs-quickview-price-sold-out{% endunless %} {% if current_variant.compare_at_price > current_variant.price %} boost-pfs-quickview-price-on-sale{% endif %}">
            <p class="boost-pfs-quickview-price">
              {% if current_variant.compare_at_price > current_variant.price %}
                <span id="boost-pfs-quickview-current-price" class="boost-pfs-quickview-price">
                  {{ current_variant.price | money }}
                </span>
                <span id="boost-pfs-quickview-was-price" class="boost-pfs-quickview-price boost-pfs-quickview-was-price">
                  {{ current_variant.compare_at_price | money }}
                </span>
              {% else %}
                <span id="boost-pfs-quickview-current-price" class="boost-pfs-quickview-price">
                  {{ current_variant.price | money }}
                </span>
                <span id="boost-pfs-quickview-was-price" class="boost-pfs-quickview-price boost-pfs-quickview-was-price"></span>
              {% endif %}
            </p>
        </div>
        {% endif %}

        {% if active_cart_form %}
        <form id="boost-pfs-quickview-cart-form" action="/cart/add" method="post" enctype="multipart/form-data" class="boost-pfs-quickview-cart-form product-form">
          <div id="boost-pfs-quickview-variants-data" style="display:none">
            [
            {% for variant in product.variants %}
              {
                "id": {{ variant.id | json }},
                "option1": {{ variant.option1 | json }},
                "option2": {{ variant.option2 | json }},
                "option3": {{ variant.option3 | json }},
                "available": {{ variant.available | json }}
              }{%- if forloop.last != true -%},{%- endif -%}
            {% endfor %}
            ]
          </div>

          <select style="display:none" name="id" id="boost-pfs-quickview-variants-selector" class="boost-pfs-quickview-variants-selector">
            {% for variant in product.variants %}
              {% if variant.image != blank %}
                {% assign variant_image = variant.image %}
              {% else %}
                {% assign variant_image = featured_image %}
              {% endif %}
              <option value="{{ variant.id }}"
                  data-magnify-src="{{ variant_image | img_url: image_size, scale: image_scale }}"
                  data-featured-image="{{ variant_image | img_url: image_size }}"
                  data-variant-id="{{ variant.id }}" data-options="{{ variant.title }}"
                  data-current-price-without-currency="{{ variant.price | money_without_currency }}"
                  data-current-price="{{ variant.price | money | strip_html }}"
                  data-was-price-without-currency="{{ variant.compare_at_price | money_without_currency }}"
                  data-was-price="{% if variant.compare_at_price > 0 %} {{ variant.compare_at_price | money | strip_html }} {% endif %}"
                  {% if variant.available %} data-available="true" {% else %} data-available="false" disabled="disabled" {% endif %}
                  {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %}>
              </option>
            {% endfor %}
          </select>

          {% assign variantCount = product.variants | size %}
          {% if variantCount > 0 and product.variants[0].title != 'Default Title'  %}
            {%- for option in product.options_with_values -%}
                {% assign is_color = false %}
                {% assign option_name = option.name | downcase %}
                {% assign file_extension = 'png' %}
                {% assign option_id = 'option' | append: forloop.index %}
                {% if option_name contains 'color' or option_name contains 'colour' %}
                  {% assign is_color = true %}
                {% endif %}
              <div class="boost-pfs-quickview-selector-wrapper {% if index == option_size %}last{% endif %}" id="ProductSelect-option-{{ forloop.index0 }}" name="{{ option.name | handleize }}" role="link">
                <div class="boost-pfs-quickview-product-option-header">
                  {{ option.name | escape }}
                </div>
                {%- for value in option.values -%}
                  <!-- Check to see if there's a product size option. If there is a size, check to see if there's any availble for purchase. If not, set the variat control in a "disabled" state. -->
                  {%- assign variant_label_state = true -%}

                  {%- if product.options.size == 1 -%}
                    {%- unless product.variants[forloop.index0].available -%}
                      {%- assign variant_label_state = false -%}
                    {%- endunless -%}
                  {%- endif -%}
                  <div data-value="{{ value | escape }}" class="boost-pfs-swatch-element {% if is_color %} boost-pfs-quickview-option-color {% endif %} {{ value | handle }} {% if variant.available %}available{% else %}boost-pfs-soldout{% endif %}">
                    {% if is_color %}
                    <div class="boost-pfs-quickview-tooltip">{{ value }}</div>
                    {% endif %}
                    <input type="radio"
                      {% if option.selected_value == value %} checked="checked"{% endif %}
                      {% unless variant_label_state %} disabled="disabled"{% endunless %}
                      value="{{ value | escape }}"
                      data-name="{{ option.name | handleize }}"
                      name="{{ option_id }}"
                      id="ProductSelect-option-{{ option.name | handleize }}-{{ value | escape }}"
                      class="boost-pfs-quickview-select-option">
                    {% if is_color %}
                    <label tabindex="0" aria-label="{{ option.name }}: {{ value | escape }}" for="ProductSelect-option-{{ option.name | handleize }}-{{ value | escape }}" style="background-color: {{ value | split: ' ' | last | handle }}; background-image: url({{ value| prepend: 'color-' | handle | append: '.' | append: file_extension | file_url }})">
                    </label>
                    {%- else -%}
                    <label tabindex="0" aria-label="{{ option.name }}: {{ value | escape }}" for="ProductSelect-option-{{ option.name | handleize }}-{{ value | escape }}">
                      {{ value | escape }}
                    </label>
                    {%- endif -%}
                  </div>
                {%- endfor -%}
              </div>
            {%- endfor -%}
          {%- endif -%}

          <div class="boost-pfs-quickview-qty-cartbtn-wrapper">
            <label for="boost-pfs-quickview-cart-quantity">{{ quantity_label }}</label>
            <div class="boost-pfs-quickview-qty-cartbtn">
              <div class="boost-pfs-quickview-quantity">
                <input role="textbox" type="number" id="boost-pfs-quickview-cart-quantity" name="quantity" value="1" min="1" class="boost-pfs-quickview-cart-quantity" pattern="[0-9]*" required>
              </div>
              <div class="boost-pfs-quickview-cart">
                <button type="submit" name="add" id="boost-pfs-quickview-cart-btn" {% unless current_variant.available %}disabled="disabled"{% endunless %} class="boost-pfs-quickview-cart-btn{% if product.options.size == 1 and product.variants[0].title == 'Default Title' %} product-form__cart-submit--small{% endif %}">
                  <span id="boost-pfs-quickview-cart-btn-text">
                    {% unless current_variant.available %}
                      {{ sold_out_btn_label }}
                    {% else %}
                      {{ add_to_cart_btn_label }}
                    {% endunless %}
                  </span>
                </button>
                <div id="boost-pfs-addtocart-error-label"></div>
              </div>
            </div>
          </div>
        </form>
        {% endif %}
        <div class="boost-pfs-quickview-view-full-wrapper"><a href="{{ product.url | within_collection }}" class="boost-pfs-quickview-view-full">{{ view_full_label }}</a></div>
      </div>
    </div>
    {% endcomment %}
   

      {%- capture formid -%}qvproduct_form_product_{{product.id}}{%- endcapture -%}
    <div id="qv_{{product.id}}" class="variantselec qv-product-options_html product grid grid--1-col js-product_section grid--2-col-tablet">

      <div class="grid__item product__media-wrapper">
      
        <slider-component class="slider-mobile-gutter">
          <a class="skip-to-content-link button visually-hidden" href="#ProductInfo-{{ section.id }}">
            {{ "accessibility.skip_to_product_info" | t }}
          </a>


          <div class="gallery-containerr">

            <div class="product__media-list gridd grid--peek list-unstyled qv-product-main-images" role="list">
              {% comment %}
              {%- assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' -%}
              {%- if product.selected_or_first_available_variant.featured_media != null -%}
              {%- assign media = product.selected_or_first_available_variant.featured_media -%}
              <div class="slide product__media-item grid__item" data-media-id="{{ section.id }}-{{ media.id }}">
                {% render 'product-thumbnail', media: media, position: 'featured', loop: true, modal_id: product.id, xr_button: false %}
              </div>
              {%- endif -%}
              {%- for media in product.media -%}
              {%- unless media.id == product.selected_or_first_available_variant.featured_media.id -%}
              <div class="slide product__media-item grid__item " data-media-id="{{ section.id }}-{{ media.id }}">
                {% render 'product-thumbnail', media: media, position: forloop.index, loop: false, modal_id: product.id, xr_button: false %}
              </div>
              {%- endunless -%}
              {%- endfor -%}
              {% endcomment %}
              
              {% for image in product.images %}
              <div class="slide product__media-item grid__item ">
                <img src="{{ image.src | img_url: image_size }}" alt="{{ image.alt | escape }}" />
              </div>
              {% endfor %}
            </div>
    
            <div class="qv-product-thumb-images slider-nav product__media-list gridd grid--peek list-unstyled" role="list">
              {% for image in product.images %}
              <div class="product__media-item slide">
                <img src="{{ image.src | img_url: image_size }}" alt="{{ image.alt | escape }}" />
              </div>
              {% endfor %}
              {% comment %}
              {%- assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' -%}
              {%- for media in product.media -%}
              {%- unless media.id == product.selected_or_first_available_variant.featured_media.id -%}
              <div class="product__media-item slide" data-media-id="{{ section.id }}-{{ media.id }}">
                {% render 'product-thumbnail', media: media, position: forloop.index, loop: section.settings.enable_video_looping, modal_id: section.id, hide_icon: true %}
              </div>
              {%- endunless -%}
              {%- endfor -%}
              {% endcomment %}
            </div>       

          </div>


        </slider-component>
        {% comment %}
        <div class="boost-pfs-quickview-left boost-pfs-quickview-product-thumbs">

          {% if product.images.size > 0 %}
          <div class="boost-pfs-quickview-slider">
            <div class="boost-pfs-quickview-slider-inner">
              <div class="boost-pfs-quickview-featured-image-wrapper">
                {% for image in product.images %}<div class="boost-pfs-quickview-featured-image">
                <img src="{{ image.src | img_url: image_size }}" alt="{{ image.alt | escape }}" />
                </div>
                {% endfor %}
              </div>
            </div>
            {% if product.compare_at_price > product.price %}
            <div class="boost-pfs-quickview-sale-lable">Sale</div>
            {% endif %}<div class="boost-pfs-quickview-slider-nav">
            <button class="boost-pfs-filter-button boost-pfs-quickview-slider-prev" aria-label="Previous image"> </button>
            <button class="boost-pfs-filter-button boost-pfs-quickview-slider-next" aria-label="Next image"> </button>
            </div>
            <div class="boost-pfs-quickview-slider-dots">
              {% for image in product.images %}
              <div class="boost-pfs-quickview-slider-dot" data-image="{{ image.src | product_img_url }}" data-index="{{forloop.index0}}"> </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}

        </div> 
        {% endcomment %}
      
      </div>

      <div class="product__info-wrapper grid__item" >
        <div class="product__info-container">

          {% assign newTagFlag =  false %}
          {% for tag in product.tags %}
          {% assign tagHanlde =  tag | handle %}

          {% if tagHanlde == 'new' %}
          {% assign newTagFlag =  true %}
          {% endif %}

          {% endfor %}

          {% if newTagFlag %}
          <span class="badge price__badge-new color-{{ settings.sale_badge_color_scheme }}">
            {{ 'products.product.new' | t }}
          </span>
          {% else %}
          {%- if product.compare_at_price > product.price %} 
        <span class="badge price__badge-sale color-{{ settings.sale_badge_color_scheme }}">
          {{ 'products.product.on_sale' | t }}
          </span>
          {%- endif -%}

          {% endif %}

          <p class="product__text caption-with-letter-spacing"> <a href="/collections/{{ product.vendor |handle }}">{{product.vendor}}</a></p>

          <h1 class="product__title" {{ block.shopify_attributes }}>
            {{ product.title | escape }}
          </h1>

          <div class="no-js-hidden" id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
            {%- render 'price', product: product, use_variant: true, show_badges: false, price_class: 'price--large' -%}

          </div>  
          <div class="ruk_rating_snippet" data-sku="{{ product.handle }};{{ product.variants | map: 'sku' | join: ';' }};{{ product.variants | map: 'id' | join: ';' }}"></div>


          {%- if shop.taxes_included or shop.shipping_policy.body != blank -%}
          <div class="product__tax caption rte">
            {%- if shop.taxes_included -%}
            {{ 'products.product.include_taxes' | t }}
            {%- endif -%}
            {%- if shop.shipping_policy.body != blank -%}
            {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
            {%- endif -%}
          </div>
          {%- endif -%}
          <div {{ block.shopify_attributes }}>
            {%- form 'product', product, id: 'product-form-installment', class: 'installment caption-large' -%}
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            {{ form | payment_terms }}
            {%- endform -%}
          </div>


          {%- if product.description != blank -%}
          <div class="ProductMeta_Description small__heightt bottomImg" {{ block.shopify_attributes }}>
            <div class="product__description short_des rte">
              <p>  {{ product.description | strip_html | truncate: 150}}</p>
            </div>
            <div class="product__description long_des hide rte">
              {{ product.description }}
            </div>
            <div class="des_bottom_div">
              <div class="dec-overlayy"></div>

            </div>
            <a class="view-product" href="{{product.url}}"><span>Learn More</span></a>
          </div>
          {%- endif -%}
 {% assign qty = 1 %} 
          {% assign minTag = false %}
          {% for tag in product.tags %}
          {% if tag contains 'min-qty:' %}
          {% assign minTag = true %}
          {% assign qty = tag | split:":" | last | plus:0 %}
          {% endif %}
          {% endfor %}
<!--           variant -->

          {% assign current_available_variant = product.selected_or_first_available_variant %}
          {% assign  current_v_option1_vars  = product.variants | where: "option1" , current_available_variant.option1 | where: "available" %}

          {% assign current_option1 = ""  %}
          {% assign current_option2 = ""  %}
          {% assign current_option3 = ""  %}

          {% for current_v in current_v_option1_vars %}
          {% if current_v.inventory_quantity >= qty %}
          {% assign current_option1 = current_option1 | append: current_v.option1 |append:","   %}
          {% assign current_option2 = current_option2 | append: current_v.option2 |append:"," %}
          {% assign current_option3 = current_option3 | append: current_v.option3 |append:"," %}
          {% endif %}
          {% endfor %}

         

          {%- unless product.has_only_default_variant -%}
          <variant-radios {% if minTag %} data-min-qty="{{qty | plus: 0}}" {% else %}  data-min-qty=1 {% endif %} {% for var in product.variants %}data_{{- var.id -}} = "{{ var.inventory_quantity | default: 0}}"{% endfor %} id="product_{{product.id}}" product_id="qv_{{product.id}}" class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" {{ block.shopify_attributes }}>

            {% assign product_var_qty = product.selected_or_first_available_variant.inventory_quantity %}

            <h3 id="stockmsg" class="stockmsg">
              {% if product_var_qty > qty %}
              {% if product_var_qty >= 10 %}
              In stock 
              {% else if product_var_qty < 10 and product_var_qty > 0 %}
              Low in stock
              {% else %}
              Out of stock
              {% endif %}
              {% else %}
              Out of stock
              {% endif %}
            </h3>  

            {%- for option in product.options_with_values -%}

            {% assign optionString = "option"|append: forloop.index %}

            <fieldset class="option-selection-{{ option.name |handle }}0 js product-form__input {{optionString}}_for_below_input">
              <legend class="option">{{ option.name }}</legend>
              {%- for value in option.values -%}


              {% assign curValueVars = product.variants | where: optionString, value %}

              {% assign option_1 = "" %}
              {% assign option_2 = "" %}
              {% assign option_3 = "" %}

              {% for v in curValueVars %}

              {% if v.available and v.inventory_quantity >= qty  %}

              {% if optionString == "option1" %}

              {% assign option_1 = value %}
              {% assign option_2 = option_2 | append: v.option2 |append:"," %}
              {% assign option_3 = option_3 | append: v.option3 |append:"," %}
              {% endif %}

              {% if optionString == "option2" %} 
              {% assign option_2 = value %}
              {% assign option_1 = option_1 | append: v.option1 |append:"," %}
              {% assign option_3 = option_3 | append: v.option3 |append:"," %}
              {% endif %}

              {% if optionString == "option3" %}
              {% assign option_3 = value %}
              {% assign option_1 = option_1 | append: v.option1 |append:"," %}
              {% assign option_2 = option_2 | append: v.option2 |append:"," %}
              {% endif %}

              {% endif %}


              {% endfor %}


              <input data_option1="{{option_1}}" data_option2="{{option_2}}" data_option3="{{option_3}}" type="radio" id="{{ value | handle }}_{{option.position}}_{{product.id}}"
                     name="{{ option.name }}-{{product.id}}"
                     value="{{ value | escape }}"
                     form="{{ product_form_id }}"
                     class="input-{{value | handle |replace:"_","-"}}
                            {%- if option.position == 1 -%} {%- if option_2 != blank -%} available {%- else -%} soldout {%- endif -%}{%- endif -%}
                            {%- if option.position == 2 -%} {%- if current_option2 contains value -%}available{%- else -%}soldout {%- endif -%}  {%- endif -%}
                            {%- if option.position == 3 -%} {%- if current_option3 contains value -%}available{%- else -%} soldout {%- endif -%}  {%- endif -%}
                            "
                     {% if forloop.first %}checked{% endif %}
       {% comment %} {% assign current_option1_array = current_option1 | split:"," %}
                     {% if option.position == 1 %} {% if current_option1_array[0] == value %}checked {% endif %}  {% endif %} 
                     {% assign current_option2_array = current_option2 | split:"," %}
                     {% if option.position == 2 %} {% if current_option2_array[0] == value %}checked {% endif %}  {% endif %}

                     {% assign current_option3_array = current_option3 | split:"," %}
                     {% if option.position == 3 %} {% if current_option3_array[0] == value %}checked {% endif %}  {% endif %} 
{% endcomment %}  
                     >
              <label option_index="{{ option.position }}" 
                     class="swatch-element label-{{value | handle |replace:"_","-"}}"  
                     for="{{ value | handle }}_{{option.position}}_{{product.id}}">
                {{ value }}
              </label>
              {%- endfor -%}
            </fieldset>
            {%- endfor -%}
            <script type="application/json">
                    {{ product.variants | json }}
            </script>
          </variant-radios>

          {%- endunless -%}

          <noscript class="product-form__noscript-wrapper-{{ section.id }}">
            <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
              <label class="form__label" for="Variants-{{ section.id }}">{{ 'products.product.product_variants' | t }}</label>
              <div class="select">
                <select name="id" id="Variants-{{ section.id }}" class="select__select" form="{{ product_form_id }}">
                  {%- for variant in product.variants -%}
                  <option
                          {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                          {% if variant.available == false %}disabled{% endif %}
                          value="{{ variant.id }}"
                          >
                    {{ variant.title }}
                    {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                        - {{ variant.price | money | strip_html }}
                  </option>
                  {%- endfor -%}
                </select>
                {% render 'icon-caret' %}
              </div>
            </div>
          </noscript>


          
          
          
<!--           qty -->
          <div class="product-form__input product-form__quantity" {{ block.shopify_attributes }}>
            <div>
              <label class="form__label" for="Quantity-{{ section.id }}">
                {{ 'products.product.quantity.label' | t }}
              </label>
              {% assign qty = 1 %} 
                {% for tag in product.tags %}
                {% if tag contains 'min-qty:' %}
                {% assign qty = tag | split:":" | last | plus:0 %}
                {% endif %}
                {% endfor %}

              <quantity-input class="quantity">
                <button class="quantity__button no-js-hidden" name="minus" type="button">
                  <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                  {% render 'icon-minus' %}
                </button>
                <input class="quantity__input"
                       type="text"
                       name="quantity"
                       id="Quantity-{{ section.id }}"
                       min="{{qty}}"
                       value="{{qty}}"
                       form="qvproduct_form_product_{{product.id}}"
                       >
                <button class="quantity__button no-js-hidden" name="plus" type="button">
                  <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                  {% render 'icon-plus' %}
                </button>
              </quantity-input>
             {% for tag in product.tags %}
                {% if tag contains 'min-qty:' %}
                  {% assign qty = tag | split:":" | last | plus:0 %}
                <p>Minimum quantity of {{qty}} <span class="popup_minq"><a href="#one" class="fancybox"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7.49968 0C3.3581 0 0 3.3581 0 7.49968C0 11.6413 3.3581 15 7.49968 15C11.6413 15 15 11.6413 15 7.49968C15 3.3581 11.6413 0 7.49968 0ZM9.06095 11.6235C8.67492 11.7759 8.36762 11.8914 8.13714 11.9714C7.9073 12.0514 7.64 12.0914 7.33587 12.0914C6.86857 12.0914 6.50476 11.9771 6.24571 11.7492C5.98667 11.5213 5.85778 11.2324 5.85778 10.8813C5.85778 10.7448 5.8673 10.6051 5.88635 10.4629C5.90603 10.3206 5.93714 10.1606 5.97968 9.98095L6.46286 8.27429C6.5054 8.11048 6.54222 7.95492 6.57143 7.81016C6.60064 7.66413 6.6146 7.53016 6.6146 7.40825C6.6146 7.19111 6.56952 7.03873 6.48 6.95302C6.38921 6.8673 6.21841 6.8254 5.96381 6.8254C5.83937 6.8254 5.71111 6.84381 5.57968 6.88254C5.44952 6.92254 5.33651 6.95873 5.24381 6.99429L5.37143 6.46857C5.68762 6.33968 5.99048 6.22921 6.27937 6.13778C6.56825 6.04508 6.84127 5.99937 7.09841 5.99937C7.56254 5.99937 7.92064 6.11238 8.1727 6.33587C8.42349 6.56 8.54984 6.85143 8.54984 7.20952C8.54984 7.28381 8.54095 7.4146 8.52381 7.60127C8.50667 7.78857 8.47429 7.95937 8.4273 8.11619L7.94667 9.81778C7.9073 9.95429 7.87238 10.1105 7.84064 10.2851C7.80952 10.4597 7.79429 10.593 7.79429 10.6825C7.79429 10.9086 7.84444 11.0629 7.94603 11.1448C8.04635 11.2267 8.22222 11.2679 8.47111 11.2679C8.58857 11.2679 8.72 11.247 8.86857 11.2063C9.01587 11.1657 9.12254 11.1295 9.18984 11.0984L9.06095 11.6235ZM8.97587 4.71683C8.75175 4.92508 8.4819 5.02921 8.16635 5.02921C7.85143 5.02921 7.57968 4.92508 7.35365 4.71683C7.12889 4.50857 7.01524 4.25524 7.01524 3.95937C7.01524 3.66413 7.12952 3.41016 7.35365 3.2C7.57968 2.98921 7.85143 2.88444 8.16635 2.88444C8.4819 2.88444 8.75238 2.98921 8.97587 3.2C9.2 3.41016 9.31238 3.66413 9.31238 3.95937C9.31238 4.25587 9.2 4.50857 8.97587 4.71683Z" fill="#44444D"/>
                  </svg>
                  </a></span>
                </p>
                {% endif %}
                {% endfor %}
            </div>
            <div>

              {% assign cartTotal = cart.total_price %}
              {% assign cartthreshhold = settings.freeshipping | times:100.00 %}
              {% assign percentmainvalue = cartTotal | divided_by: cartthreshhold %}
              {% assign mainPercent = percentmainvalue | times: 100.00 %}
              {% assign needAmmount = cartTotal  | minus: cartthreshhold %}
              <style>
                .w3-light-grey{
                  color: #000!important;
                  background-color: #f1f1f1!important;
                  margin: 10px 0;
                }
                .w3-green, 
                .w3-hover-green:hover {
                  color: #fff!important;
                  background-color: #F5694D!important;
                  height:6px;

                }
                .progress-warp {
                  margin: 30px 20px;
                  text-align:center;
                  overflow:hidden;
                }
              </style>
              <div class="progress-warp" threshold="{{cartthreshhold}}">

                <div class="w3-light-grey">
                  <div id="precentfill" class="w3-green" style="width:{{mainPercent}}%"></div>
                </div>

                {% comment %}
                <div> <span class="progress-bar-money">{% if cartTotal >= cartthreshhold %}{{cartthreshhold | money }} {{ 'general.cart.eligible' | t }} {% else %} {{ 'general.cart.spend' | t: needAmmount: needAmmount | money |remove:'-' }}{% endif %}</span> FREE SHIPPING!</div>

                {% endcomment %}
                <div> <span id="textmsg" class="progress-bar-money">
                  {% if cartTotal >= cartthreshhold %}{{cartthreshhold | money }} Done, You are eligible for {% else %}Spend {{  needAmmount | money |remove:'-' }} more to receive{% endif %}
                  </span> FREE SHIPPING!</div>
              </div>

            </div>


          </div>

<!-- form -->


          
          <product-form class="product-form"> 
            <div class="product-form__error-message-wrapper" role="alert" hidden>
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-error" viewBox="0 0 13 13">
                <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7"/>
              </svg>
              <span class="product-form__error-message"></span>
            </div>
            {%- form 'product', product, id: formid, class: 'form shopify-product-form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <div class="product-form__buttons">

              <a id="notifyme" class="  {% if product.selected_or_first_available_variant.available == false or product.selected_or_first_available_variant.inventory_quantity < qty %} notifyme {% else %} hide {% endif %} button button--full-width{% if product.selling_plan_groups == empty %}button--secondary{% else %}button--primary{% endif %}">
                Notify me
              </a> 
              <button
                      type="submit"
                      name="add"
                      class="{% if product.selected_or_first_available_variant.available == false or product.selected_or_first_available_variant.inventory_quantity < qty %} 
                             hide {% endif %}  product-form__submit  button button--full-width {% if product.selling_plan_groups == empty %}button--secondary{% else %}button--primary{% endif %}"
                      {% if product.selected_or_first_available_variant.available == false or product.selected_or_first_available_variant.inventory_quantity < qty %}disabled{% endif %}
                      >
                <span>
                  {%- if product.selected_or_first_available_variant.available -%}
                  {{ 'products.product.add_to_cart' | t }}
                  {%- else -%}
                  {{ 'products.product.sold_out' | t }}
                  {%- endif -%}
                </span>
                <div class="loading-overlay__spinner hidden">
                  <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                    <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                  </svg>
                </div>
              </button>

              <!-- Swym Wishlist Plus EPI Button-->
              <button data-with-epi="true" class="swym-button swym-add-to-wishlist-view-product product_{{product.id}}" data-swaction="addToWishlist" data-product-id="{{ product.id | json}}" data-variant-id="{{ product.variants[0].id}}" data-product-url="{{ shop.url }}{{  product.url }}">
                <span class="swym-wishlist-cta">Add to Wishlist</span>
              </button>
              <!-- Swym Wishlist Plus EPI Button-->

              {%- if settings.show_dynamic_checkout -%}
              {{ form | payment_button }}
              {%- endif -%}

            </div>
            {%- endform -%}


          </product-form>

        </div>
      </div>




    </div>
  </div>
</div>